from locust import HttpUser, task, between
import os

class WebsiteUser(HttpUser):
    # –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
    wait_time = between(0.1, 1.0)
    
    def on_start(self):
        """–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç–µ—Å—Ç"""
        print("üöÄ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ")
        
    @task(10)  # –í–µ—Å 10 - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ
    def view_homepage(self):
        """–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ - –ø—Ä–æ—Å–º–æ—Ç—Ä –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã"""
        response = self.client.get("/")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞
        if response.status_code != 200:
            print(f"‚ùå –û—à–∏–±–∫–∞: {response.status_code}")
        else:
            print("‚úÖ –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å")
    
    @task(5)   # –í–µ—Å 5 - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–∂–µ
    def quick_reload(self):
        """–ë—ã—Å—Ç—Ä–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã"""
        self.client.get("/")
        
    @task(2)   # –í–µ—Å 2 - —Å–æ–∑–¥–∞–µ—Ç –ø–∏–∫–æ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É
    def stress_burst(self):
        """–°–æ–∑–¥–∞–µ—Ç –≤—Å–ø–ª–µ—Å–∫ –Ω–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥–∞"""
        # –î–µ–ª–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–¥—Ä—è–¥
        for i in range(5):
            self.client.get("/")
